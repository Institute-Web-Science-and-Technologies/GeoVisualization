\chapter{Implementation von Beispielapps}
\label{implementation}
\section{Allgemein}
\subsection{Spiellogik}
\subsubsection{Server}
Der implementierte Server arbeitet mit Java und ZeroMQ. Er öffnet zwei Kommunikationskanäle mit dem Client. Der erste ist ein ZeroMQ-Request-Reply-Socket-Paar, über das die Endgeräte Nachrichten an den Server senden. Der zweite ist ein Publish-Subscribe-Socket-Paar, über das die Nachrichten an Gruppen von Endgeräten weitergeleitet werden. Eine Nachricht besteht aus drei Teilen: einer Adresse, dem Nachrichtentyp und einem serialisierten Objekt vom Typ TransferObject (siehe Abbildung \ref{fig:transfer}). Die Adresse ist entweder die ID eines Spielers oder die ID einer Spielinstanz. Wir nutzen ZeroMQs Multipart-Message-Feature um diese Teile voneinander getrennt bei der Kommunikation zu übermitteln. Der Server sendet eingehende Nachrichten an bestimmte Clients weiter. Das kann entweder ein einzelner Client, oder alle Clients die sich in einer Spielsession befinden, sein. Der Server kennt dabei den Zustand der einzelnen Spiele nicht. , Um mehrere Spielinstanzen gleichzeitig verwalten zu können, hält er aber eine Liste aller laufenden Spiele samt Informationen darüber, welcher Spieler an welchem Spiel teilnimmt. Wenn eine Nachricht vom Typ \glqq create\_game\grqq empfangen wird trägt der Server die ID des Spiels in eine Liste ein. Diese Liste wird einem Client gesendet wenn er sie über eine entsprechende Nachricht anfragt.



\begin{figure}
	\begin{center}
		\includegraphics[width=1\textwidth]{img/snake.png}
	\end{center}
	
	\caption{UML-Diagramm zur Spiellogik}
	\label{fig:snake}
\end{figure}

\subsubsection{Client}
\input{5-Implementation_von_Beispielapps/5-1-Snake/5-1_index.tex}
\input{5-Implementation_von_Beispielapps/5-2-Verstecken/5-2_index.tex}

